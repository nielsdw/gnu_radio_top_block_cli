# GNU Radio Companion TOP Block Without GUI
This repo is a rewrite of top_block.py, the file generated by 
GNU Radio Companion when a block diagram is run. The rewrite
is done in a way that the GUI is removed and the block diagram
is run in a headless mode. This is useful for running the block
diagram on a server or in a script.

You will need a working hack rf setup on the system that runs this code.
If you have a working hack rf setup, you can run the code by running
```bash
python3 -m venv --system-site-packages svenv
source svenv/bin/activate

pip install -r requirements.txt
python top_block.py
```
The program will listen for AMQP messages on the queue `hackrf` and
execute the block diagram when a message is received. An example message:
```
{
  "mod": 5000,  # 5 kHz modulation, 
  "freq": 90000000,  # 90 MHz
  "input": "silence.wav",  # Input file, or 'monitor' to use the system's default audio input 
  "state": true,  # Turn on the HackRF, false to turn off
  "ctcss_freq": 88.5,  # 88.5 Hz CTCSS tone 
  "ctcss_part": 0.05  # 5% CTCSS tone
}
```